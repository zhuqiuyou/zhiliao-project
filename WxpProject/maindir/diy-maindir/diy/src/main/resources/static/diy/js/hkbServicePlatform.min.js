function f_tcalGetHTML(e){var t=f_tcalGetInputs(!0);if(t){var n=A_TCALCONF.cssprefix,a=A_TCALCONF.format,i=f_tcalParseDate(A_TCALCONF.today,A_TCALCONF.format);i||(i=f_tcalResetTime(new Date));var o=f_tcalParseDate(t.value,a);o||(o=f_tcalParseDate(A_TCALCONF.selected,A_TCALCONF.format)),o||(o=new Date(i)),e=e?f_tcalResetTime(e):new Date(o);var r=new Date(e);r.setDate(1),r.setDate(1-(7+r.getDay()-A_TCALCONF.weekstart)%7);for(var l,s='<table id="'+n+'Controls"><tbody><tr>'+(A_TCALCONF.yearscroll?'<td id="'+n+'PrevYear" '+f_tcalRelDate(e,-1,"y")+' title="'+A_TCALCONF.prevyear+'"></td>':"")+'<td id="'+n+'PrevMonth"'+f_tcalRelDate(e,-1)+' title="'+A_TCALCONF.prevmonth+'"></td><th>'+A_TCALCONF.months[e.getMonth()]+" "+e.getFullYear()+'</th><td id="'+n+'NextMonth"'+f_tcalRelDate(e,1)+' title="'+A_TCALCONF.nextmonth+'"></td>'+(A_TCALCONF.yearscroll?'<td id="'+n+'NextYear"'+f_tcalRelDate(e,1,"y")+' title="'+A_TCALCONF.nextyear+'"></td>':"")+'</tr></tbody></table><table id="'+n+'Grid"><tbody><tr>',c=0;c<7;c++)s+="<th>"+A_TCALCONF.weekdays[(A_TCALCONF.weekstart+c)%7]+"</th>";s+="</tr>";for(var d,u=new Date(r);u.getMonth()==e.getMonth()||u.getMonth()==r.getMonth();){s+="<tr>";for(var f=0;f<7;f++)l=[],d=u.getDate(),u.getMonth(),u.getMonth()!=e.getMonth()&&(l[l.length]=n+"OtherMonth"),0!=u.getDay()&&6!=u.getDay()||(l[l.length]=n+"Weekend"),u.valueOf()==i.valueOf()&&(l[l.length]=n+"Today"),u.valueOf()==o.valueOf()&&(l[l.length]=n+"Selected"),s+="<td"+f_tcalRelDate(u)+(l.length?' class="'+l.join(" ")+'">':">")+d+"</td>",u.setDate(++d);s+="</tr>"}return s+="</tbody></table>"}}function f_tcalRelDate(e,t,n){var n="y"==n?"FullYear":"Month",a=new Date(e);return t&&(a["set"+n](e["get"+n]()+t),a.getDate()!=e.getDate()&&a.setDate(0)),' onclick="f_tcalUpdate('+a.valueOf()+(t?",1":"")+')"'}function f_tcalResetTime(e){return e.setMilliseconds(0),e.setSeconds(0),e.setMinutes(0),e.setHours(12),e}function f_tcalCancel(){var e=A_TCALCONF.cssprefix,t=document.getElementById(e);t&&(t.style.visibility="");for(var n=f_tcalGetInputs(),a=0;a<n.length;a++)f_tcalRemoveClass(n[a],e+"Active")}function f_tcalUpdate(e,t){var n=f_tcalGetInputs(!0);if(n){d_date=new Date(e);var a=A_TCALCONF.cssprefix;if(t){var i=document.getElementById(a);if(!i||"visible"!=i.style.visibility)return;i.innerHTML=f_tcalGetHTML(d_date,n)}else n.value=f_tcalGenerateDate(d_date,A_TCALCONF.format),f_tcalCancel()}}function f_tcalOnClick(){var e=A_TCALCONF.cssprefix,t=e+"Active",n=f_tcalHasClass(this,t);if(f_tcalCancel(),!n){f_tcalAddClass(this,t);var a=f_getPosition(this,"Left"),i=f_getPosition(this,"Top")+this.offsetHeight,o=document.getElementById(e);o||(o=document.createElement("div"),o.onselectstart=function(){return!1},o.id=e,document.getElementsByTagName("body").item(0).appendChild(o)),o.innerHTML=f_tcalGetHTML(null),o.style.top=i+"px",o.style.left=a+this.offsetWidth-o.offsetWidth+"px",o.style.visibility="visible"}}function f_tcalParseDate(e,t){if(e){for(var n,a="^",i={},o=0,r=0;r<t.length;r++)n=t.charAt(r),A_TCALTOKENS_IDX[n]?(i[n]=++o,a+="("+A_TCALTOKENS_IDX[n].r+")"):a+=" "==n?"\\s":(n.match(/[\w\d]/)?"":"\\")+n;var l=new RegExp(a+"$");if(e.match(l)){var s,c=f_tcalResetTime(new Date);for(c.setDate(1),r=0;r<A_TCALTOKENS.length;r++)n=A_TCALTOKENS[r].t,i[n]&&(s=RegExp["$"+i[n]],c=A_TCALTOKENS[r].p(c,s));return c}}}function f_tcalGenerateDate(e,t){for(var n,a="",i=0;i<t.length;i++)n=t.charAt(i),a+=A_TCALTOKENS_IDX[n]?A_TCALTOKENS_IDX[n].g(e):n;return a}function f_tcalGetInputs(e){var t,a=document.getElementsByTagName("input"),i=[];for(n=0;n<a.length;n++)if(t=a[n],t.type&&"text"==t.type&&f_tcalHasClass(t,"tcal")){if(e&&f_tcalHasClass(t,A_TCALCONF.cssprefix+"Active"))return t;i[i.length]=t}return e?null:i}function f_tcalHasClass(e,t){var n=e.className;if(!n)return!1;for(var a=n.split(" "),i=0;i<a.length;i++)if(a[i]==t)return!0;return!1}function f_tcalAddClass(e,t){if(!f_tcalHasClass(e,t)){var n=e.className;e.className=(n?n+" ":"")+t}}function f_tcalRemoveClass(e,t){var n=e.className;if(!n||-1==n.indexOf(t))return!1;for(var a=n.split(" "),i=[],o=0;o<a.length;o++)a[o]!=t&&(i[i.length]=a[o]);return e.className=i.join(" "),!0}function f_getPosition(e,t){for(var n,a=0,i=e;i;)n=i["offset"+t],a+=n,i=i.offsetParent;for(i=e;i!=document.body;)n=i["scroll"+t],n&&"scroll"==i.style.overflow&&(a-=n),i=i.parentNode;return a}function f_tcalInit(){if(document.getElementsByTagName){for(var e,t=f_tcalGetInputs(),n=0;n<t.length;n++)e=t[n],e.onclick=f_tcalOnClick,f_tcalAddClass(e,A_TCALCONF.cssprefix+"Input");for(window.A_TCALTOKENS_IDX={},n=0;n<A_TCALTOKENS.length;n++)A_TCALTOKENS_IDX[A_TCALTOKENS[n].t]=A_TCALTOKENS[n]}}function f_tcalAddOnload(e){if(document.addEventListener)window.addEventListener("load",e,!1);else if(window.attachEvent)window.attachEvent("onload",e);else{var t=window.onload;"function"!=typeof window.onload?window.onload=e:window.onload=function(){t(),e()}}}var browser={os:function(){var e=navigator.userAgent;return{linux:!!e.match(/\(X11;( U;)? Linux/i),windows:!!e.match(/Windows/i),android:!!e.match(/Android/i),iOS:!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)}}(),device:function(){var e=navigator.userAgent;return{mobile:!!e.match(/AppleWebKit/i),iPhone:!!e.match(/iPhone/i),iPad:!!e.match(/iPad/i)}}(),supplier:function(){var e=navigator.userAgent;return{qq:!!e.match(/QQ\/\d+/i),wechat:!!e.match(/MicroMessenger/i),weixin:"MicroMessenger"==e.match(/MicroMessenger/i),ios:e.indexOf("_JFiOS")>-1,android:e.indexOf("_jfAndroid")>-1,mobile:!!e.match(/AppleWebKit.*Mobile.*/)}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase(),androidVersion:function(){var e=navigator.userAgent,t=e.indexOf("Android");if(t>=0)return parseFloat(e.slice(t+8))}(),IosVersion:function(){var e=navigator.userAgent.toLowerCase(),t=e.match(/cpu iphone os (.*?) like mac os/);return t?t[1].replace(/_/g,"."):-1}()},windowBanEvent={bundling:function(){for(var e=this,t=["click","touchstart","touchmove","touchend"],n=0;n<t.length;n++)document.body.addEventListener(t[n],e.Canceling,!1),addEventListener(t[n],e.Canceling,!1)},unbundling:function(){for(var e=this,t=["click","touchstart","touchmove","touchend"],n=0;n<t.length;n++)document.body.removeEventListener(t[n],e.Canceling,!1),removeEventListener(t[n],e.Canceling,!1)},Canceling:function(e){var e=e||window.event;e.preventDefault?(e.preventDefault(),e.stopPropagation()):(e.returnValue=!1,e.cancelBubble=!0)}},basicHkb={transitionEndFn:function(e,t){e.addEventListener("webkitTransitionEnd",t),e.addEventListener("transitionend",t)},settimeoutFn:function(e){setTimeout(e,500)},addNode:function(e,t,n,a){var i=document.createElement(e);return n&&(i.id=n),a&&(i.className=a),i.innerHTML=t,document.body.appendChild(i),i},dialogShow:function(e){e||(e={});var t=this,n=e.dialogTitle||"成员管理删除",a=e.dialogContent||"是否删除该成员",i=e.noCheck||!1,o=e.noCancel||!1,r=e.checkFn||null,l=e.checkBtnText||"确认",s=e.cancleBtnText||"取消",c=e.thisUrl||"javascript:",d=t.addBg("dialog_content_bg"),u='<div class="dialog_box"><div class="dialog_top"><p>'+n+"</p></div>";a&&(u+='<div class="dialog_body"><div class="dialog_content"><p class="dialog_big_text">'+a+"</p></div></div>"),u+='<div class="dialog_footer">',i||(u+='<a class="hkb_btn btn_green" href='+c+">"+l+"</a>"),o||(u+='<a class="hkb_btn btn_white dialog_cancel">'+s+"</a>"),u+="</div></div>";var f=t.addNode("div",u,"hkb_dialog_text","hkb_dialog_text");f.getElementsByClassName("dialog_cancel")[0]&&f.getElementsByClassName("dialog_cancel")[0].addEventListener("click",t.dialogRemove.bind(t),!1),d.addEventListener("click",t.dialogRemove.bind(t),!1),d.addEventListener("touchmove",windowBanEvent.Canceling,!1),r&&f.getElementsByClassName("dialog_check")[0].addEventListener("click",r,!1)},dialogRemove:function(){var e=this,t=document.getElementById("hkb_dialog_text");t&&(e.remove(t),e.removeBg("dialog_content_bg"))},addBg:function(e){var t=this;return t.removeBg(),t.addNode("div","",e,"tip_bg")},removeBg:function(e){document.getElementById(e)&&(document.getElementById(e).click(),this.remove(document.getElementById(e)))},remove:function(e){var t=e.parentNode;t&&t.removeChild(e)}};document.addEventListener("touchstart",function(){},!1);var basicPlatform={tabChange:function(){for(var e=document.getElementById("HKB_tabUl"),t=e.getElementsByClassName("tab_block"),n=0;n<t.length;n++)t[n].addEventListener("click",function(){var e=document.getElementsByClassName("tab_all_selected")[0];e?(e.className="tab_block",e!=this&&(this.className+=" tab_all_selected")):this.className+=" tab_all_selected"},!1);document.getElementsByClassName("content_body")[0]&&document.getElementsByClassName("content_body")[0].addEventListener("click",function(){e.getElementsByClassName("tab_all_selected")[0]&&(e.getElementsByClassName("tab_all_selected")[0].className="tab_block")},!1)},navUserDrop:function(){var e=document.getElementsByClassName("hkb_user")[0],t=document.getElementById("userList"),n=document.getElementsByClassName("user_operation")[0].getElementsByTagName("a");e.addEventListener("click",function(){t.className.indexOf("show")>-1?(!function(e){function t(){e.style.display="none",e.removeEventListener("webkitTransitionEnd",t),e.removeEventListener("transitionend",t)}e.addEventListener("webkitTransitionEnd",t),e.addEventListener("transitionend",t)}(t),t.className=t.className.replace(" show","")):(t.style.display="block",setTimeout(function(){t.className+=" show"},1)),function(){for(var e=0;e<n.length;e++)n[e].addEventListener("click",function(){event.preventDefault(),t.className=t.className.replace(" show","")},!1)}()},!1)}},memberManagement={delEvtDom:function(){for(var e=document.getElementsByClassName("member_del"),t=0;t<e.length;t++)e[t].addEventListener("click",function(){delDetailDialog.show()})},addEvtDom:function(){for(var e=document.getElementsByClassName("member_detail"),t=0;t<e.length;t++)e[t].addEventListener("click",function(){addDetailDialog.show()})},editEvtDom:function(){for(var e=document.getElementsByClassName("member_edit"),t=0;t<e.length;t++)e[t].addEventListener("click",function(){editDialog.show()})},dropDownCode:function(e){function t(){0==i?(clearInterval(o),n.className="identifying_code",n.innerHTML="点击获取验证码"):(i--,n.innerHTML="重新发送"+i+"s")}var n=e.codeButton,a=e.nums,i=0,o=0;n.addEventListener("click",function(){n.innerHTML="重新发送"+a+"s",n.className+=" btn_locked",i=a,o=setInterval(t,1e3)},!1)},inputCheck:function(e){e||(e={});var t=e.times,n=e.codeButton,a=n.innerHTML;if(event.preventDefault(),-1==n.className.indexOf("btn_locked")){alert("1"),n.innerHTML="重新发送"+t+"s",n.className+=" btn_locked";var i=setInterval(function(){n.innerHTML="重新发送"+--t+"s",t<=0&&(clearInterval(i),n.className=n.className.replace("btn_locked",""),n.innerHTML=a)}.bind(this),1e3)}},refundsDom:function(){for(var e=document.getElementsByClassName("table_operation"),t=0;t<e.length;t++)e[t].addEventListener("click",function(){refundsDialog.show()})}},A_TCALCONF={cssprefix:"tcal",months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],weekdays:["日","一","二","三","四","五","六"],longwdays:["日","一","二","三","四","五","六"],yearscroll:!0,weekstart:0,prevyear:"Previous Year",nextyear:"Next Year",prevmonth:"Previous Month",nextmonth:"Next Month",format:"Y-m-d"},A_TCALTOKENS=[{t:"Y",r:"19\\d{2}|20\\d{2}",p:function(e,t){return e.setFullYear(Number(t)),e},g:function(e){return e.getFullYear()}},{t:"m",r:"0?[1-9]|1[0-2]",p:function(e,t){return e.setMonth(Number(t)-1),e},g:function(e){var t=e.getMonth()+1;return(t<10?"0":"")+t}},{t:"F",r:A_TCALCONF.months.join("|"),p:function(e,t){for(var n=0;n<12;n++)if(A_TCALCONF.months[n]==t)return e.setMonth(n),e},g:function(e){return A_TCALCONF.months[e.getMonth()]}},{t:"d",r:"0?[1-9]|[12][0-9]|3[01]",p:function(e,t){return e.setDate(Number(t)),e.getDate()!=t&&e.setDate(0),e},g:function(e){var t=e.getDate();return(t<10?"0":"")+t}},{t:"j",r:"0?[1-9]|[12][0-9]|3[01]",p:function(e,t){return e.setDate(Number(t)),e.getDate()!=t&&e.setDate(0),e},g:function(e){return e.getDate()}},{t:"l",r:A_TCALCONF.longwdays.join("|"),p:function(e,t){return e},g:function(e){return A_TCALCONF.longwdays[e.getDay()]}},{t:"S",r:"st|nd|rd|th",p:function(e,t){return e},g:function(e){return n_date=e.getDate(),n_date%10==1&&11!=n_date?"st":n_date%10==2&&12!=n_date?"nd":n_date%10==3&&13!=n_date?"rd":"th"}}];f_tcalAddOnload(f_tcalInit);var hkbShowDialog=function(e){function t(){this.hide()}function n(e){window.event?window.event.returnValue=!1:e.preventDefault()}e||(e={}),this.details=e;var a=document.getElementById(this.details.ele);a.getElementsByClassName("dialog_close")[0].addEventListener("click",t.bind(this),!1),a.getElementsByClassName("dialog_bg")[0]&&function(e){for(var t=["touchstart","touchmove","touchend"],a=0;a<t.length;a++)e.addEventListener(t[a],n,!1)}(a.getElementsByClassName("dialog_bg")[0])};hkbShowDialog.prototype.show=function(e){e&&e.fn();var t=document.getElementById(this.details.ele);t.style.display="block",setTimeout(function(){-1==t.className.indexOf("show")&&(t.className+=" show")},1),document.getElementsByClassName("dialog_bg")[0].addEventListener("touchmove",windowBanEvent.Canceling,!1)},hkbShowDialog.prototype.hide=function(){var e=document.getElementById(this.details.ele);e.className.indexOf("show")>-1&&(!function(e){function t(){e.style.display="none",e.removeEventListener("webkitTransitionEnd",t),e.removeEventListener("transitionend",t)}e.addEventListener("webkitTransitionEnd",t),e.addEventListener("transitionend",t)}(e),e.className=e.className.replace(" show","")),windowBanEvent.unbundling()};var hkbErrorTips={errorShow:function(e){var t=this;e||(e={});var n=e.text||"null";n=n.toString().replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;");var a=n;t.errorRemove();var i=function(e,t,n){var a=document.createElement(e);return a.innerHTML=t,a.className=n,document.getElementsByClassName("login_content_prompt")[0].appendChild(a),a}("div",a,"error_main");setTimeout(function(){i.className="error_main show"},1)},errorRemove:function(){document.getElementsByClassName("error_main")[0]&&function(e){var t=e.parentNode;t&&t.removeChild(e)}(document.getElementsByClassName("error_main")[0])}};